<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>Valorant Web FPS - Aim Trainer</title>
<style>
body{margin:0;overflow:hidden;background:black;font-family:Arial}

#hud{position:fixed;top:15px;left:50%;transform:translateX(-50%);color:white;font-size:18px}

#ammo{position:fixed;bottom:20px;right:20px;color:#0f0;font-size:22px}

#crosshair{position:fixed;left:50%;top:50%;transform:translate(-50%,-50%);color:white;font-size:22px}

#settings{
position:fixed;
top:20px;
right:20px;
background:rgba(0,0,0,.7);
padding:10px;
border-radius:8px;
color:white;
font-size:14px
}
</style>
</head>

<body>

<div id="hud">Valorant Web FPS</div>
<div id="ammo">25 / 75</div>
<div id="crosshair">+</div>

<div id="settings">
감도<br>
<input type="range" min="0.1" max="3" step="0.01" value="1" id="sens"><br>
<span id="sensVal">1.00</span>
</div>

<script src="https://cdn.jsdelivr.net/npm/three@0.152.2/build/three.min.js"></script>

<script>
// ================= 씬 =================
let scene=new THREE.Scene();
scene.background=new THREE.Color(0x050505);

let camera=new THREE.PerspectiveCamera(75,innerWidth/innerHeight,0.1,1000);
camera.position.set(0,1.7,5);

let renderer=new THREE.WebGLRenderer({antialias:true});
renderer.setSize(innerWidth,innerHeight);
document.body.appendChild(renderer.domElement);

// ================= 조명 =================
scene.add(new THREE.AmbientLight(0xffffff,.4));
scene.add(new THREE.DirectionalLight(0xffffff,1).position.set(5,10,5));

// ================= 바닥 =================
let floor=new THREE.Mesh(
new THREE.PlaneGeometry(200,200),
new THREE.MeshStandardMaterial({color:0x444444})
);
floor.rotation.x=-Math.PI/2;
scene.add(floor);

// ================= 벽 =================
function wall(x,z,w,d){
let m=new THREE.Mesh(
new THREE.BoxGeometry(w,4,d),
new THREE.MeshStandardMaterial({color:0x555555})
);
m.position.set(x,2,z);
scene.add(m);
}
wall(0,-100,200,1);
wall(0,100,200,1);
wall(-100,0,1,200);
wall(100,0,1,200);

// ================= 타겟 =================
let bots=[];

function spawnBot(){
let geo=new THREE.SphereGeometry(0.45,32,32);
let mat=new THREE.MeshStandardMaterial({color:0xff3333});
let bot=new THREE.Mesh(geo,mat);

bot.position.set(
(Math.random()-0.5)*40,
1.5+Math.random()*2,
(Math.random()-0.5)*40
);

bot.health=100;
scene.add(bot);
bots.push(bot);
}

for(let i=0;i<10;i++) spawnBot();

// ================= 마우스 =================
let yaw=0,pitch=0,sensitivity=1;

document.body.onclick=()=>document.body.requestPointerLock();

document.onmousemove=e=>{
if(document.pointerLockElement){
yaw-=e.movementX*0.002*sensitivity;
pitch-=e.movementY*0.002*sensitivity;
pitch=Math.max(-1.45,Math.min(1.45,pitch));
}
};

// ================= 이동 =================
let keys={};
onkeydown=e=>keys[e.key.toLowerCase()]=true;
onkeyup=e=>keys[e.key.toLowerCase()]=false;

// ================= 총 시스템 =================
let magSize=25;
let ammo=25;
let reserve=75;
let reload=false;

document.onmousedown=shoot;

document.onkeydown=e=>{
if(e.key.toLowerCase()==='r') reloadGun();
};

function reloadGun(){
if(reload||ammo===magSize||reserve<=0)return;
reload=true;

setTimeout(()=>{
let need=magSize-ammo;
let load=Math.min(need,reserve);
ammo+=load;
reserve-=load;
reload=false;
},1200);
}

// ================= 사격 =================
let raycaster=new THREE.Raycaster();

function shoot(){
if(ammo<=0||reload)return;
ammo--;

raycaster.setFromCamera({x:0,y:0},camera);
let hit=raycaster.intersectObjects(bots);

if(hit.length){
let bot=hit[0].object;
bot.health-=100;

if(bot.health<=0){
scene.remove(bot);
bots.splice(bots.indexOf(bot),1);
spawnBot();
}
}
}

// ================= UI =================
sens.oninput=()=>{
sensitivity=sens.value;
sensVal.innerText=parseFloat(sensitivity).toFixed(2);
};

// ================= 렌더 =================
function animate(){
requestAnimationFrame(animate);

camera.rotation.order="YXZ";
camera.rotation.y=yaw;
camera.rotation.x=pitch;

let speed=0.12;
let forward=new THREE.Vector3(-Math.sin(yaw),0,-Math.cos(yaw));
let right=new THREE.Vector3(Math.cos(yaw),0,-Math.sin(yaw));

if(keys['w']) camera.position.add(forward.clone().multiplyScalar(speed));
if(keys['s']) camera.position.add(forward.clone().multiplyScalar(-speed));
if(keys['a']) camera.position.add(right.clone().multiplyScalar(-speed));
if(keys['d']) camera.position.add(right.clone().multiplyScalar(speed));

ammoDiv.innerText=`${ammo} / ${reserve}`;

renderer.render(scene,camera);
}

let ammoDiv=document.getElementById("ammo");

animate();

onresize=()=>{
camera.aspect=innerWidth/innerHeight;
camera.updateProjectionMatrix();
renderer.setSize(innerWidth,innerHeight);
};
</script>

</body>
</html>
